import{_ as B}from"./Dd3gCbqu.js";import{_ as N,a as R}from"./DFll8Cqh.js";import{_ as b}from"./D12BPXRZ.js";import{_ as y,o as l,c as _,F as T,r as L,a as c,t as f,b as t,f as k,e as v,g as D,h as A,n as F,m as C,P as j,w as n,i as g,d as w}from"./DEx55Oms.js";import{u as V,a as K}from"./CkdD8FXa.js";import"./D43SHYPB.js";const z={class:"time-code-transcription"},E={__name:"TimeCodeTranscription",props:{transcription:Object},setup(s){const u=d=>d.replaceAll("[","").replaceAll("]","");return(d,h)=>{const m=b;return l(),_("div",z,[(l(!0),_(T,null,L(s.transcription,e=>(l(),_(T,null,[c("div",null,f(u(e.time)),1),t(m,{text:e.text},null,8,["text"])],64))),256))])}}},H=y(E,[["__scopeId","data-v-8a30935e"]]),M={class:"transcription-section"},O={__name:"TranscriptionSection",props:{transcription:String},setup(s){const u=s,d=/^\s*\[(\d*:)+\d*\]\s*$/,h=x=>{if(!x)return null;const i=x.split(`
`);i.filter(p=>p.match(d));const a=[];let r,o=[];for(let p of i)if(p.match(d)){if(r&&o.length){const P=o.filter((I,S)=>I===""?!(S===0||S===o.length-1):!0);a.push({time:r,text:P.join(`
`)})}r=p,o=[]}else p===" "?o.push("<br />"):o.push(p);return r&&o.length&&a.push({time:r,text:o.join(`
`)}),a.length?a:x},m=k(()=>h(u.transcription)),e=k(()=>typeof m.value=="string");return(x,i)=>{const a=b,r=H;return l(),_("div",M,[e.value?(l(),v(a,{key:0,text:m.value},null,8,["text"])):(l(),v(r,{key:1,transcription:m.value},null,8,["transcription"]))])}}},U={class:"collapsible-section"},q={key:0},G={key:1},J={__name:"CollapsibleSection",props:{initialHeight:String},setup(s){const u=D(!0);return(d,h)=>(l(),_("div",U,[c("div",{class:"content",style:F({height:u.value?s.initialHeight:"unset"})},[A(d.$slots,"default",{},void 0,!0)],4),c("button",{onClick:h[0]||(h[0]=m=>u.value=!u.value)},[u.value?(l(),_("span",q,"Read all")):(l(),_("span",G,"Minimize"))])]))}},Q=y(J,[["__scopeId","data-v-c08b56ee"]]),W={async mounted(){},computed:{...C(V,{projectBySlug:"bySlug"}),...C(K,{interviewBySlug:"bySlug"}),interview(){var s;return((s=this.interviewBySlug((this._.provides[j]||this.$route).params.slug))==null?void 0:s[0])??{}},project(){var s;return((s=this.projectBySlug((this._.provides[j]||this.$route).params.project))==null?void 0:s[0])??{}}}},X={class:"interview-page page-wide"},Y={class:"navigation-back"},Z={class:"fields"},$={class:"row"},ee={key:0,class:"column"},te=["src"],ne={class:"row"},ie=["src"];function re(s,u,d,h,m,e){const x=B,i=R,a=N,r=b,o=O,p=Q;return l(),_("div",X,[c("div",Y,[t(x,{to:`/projects/${e.project.Slug}`},{default:n(()=>[w("< "+f(e.project.Name),1)]),_:1},8,["to"])]),c("h1",null,f(e.interview.Name),1),c("div",Z,[c("div",$,[e.interview.Photo?(l(),_("div",ee,[c("img",{class:"photo",src:e.interview.Photo[0].url},null,8,te)])):g("",!0),t(a,{class:"tight-column"},{default:n(()=>[t(i,{label:"Collection"},{default:n(()=>[w(f(e.project.Name),1)]),_:1}),t(i,{label:"Interviewer"},{default:n(()=>[w(f(e.interview.Interviewer),1)]),_:1}),t(i,{label:"Date"},{default:n(()=>[w(f(e.interview.Date),1)]),_:1}),t(i,{label:"Language"},{default:n(()=>[w(f(e.interview.Language),1)]),_:1})]),_:1})]),c("div",ne,[t(a,{class:"description-column-left"},{default:n(()=>[t(i,{label:"Interview Description"},{default:n(()=>[t(r,{text:e.interview.Description},null,8,["text"])]),_:1})]),_:1}),t(a,{class:"description-column-right"},{default:n(()=>[e.interview.Themes?(l(),v(i,{key:0,label:"Themes"},{default:n(()=>[t(r,{text:e.interview.Themes},null,8,["text"])]),_:1})):g("",!0),e.interview.People?(l(),v(i,{key:1,label:"People"},{default:n(()=>[t(r,{text:e.interview.People},null,8,["text"])]),_:1})):g("",!0),e.interview.Keywords?(l(),v(i,{key:2,label:"Keywords"},{default:n(()=>[t(r,{text:e.interview.Keywords},null,8,["text"])]),_:1})):g("",!0),e.interview.Places?(l(),v(i,{key:3,label:"Places"},{default:n(()=>[t(r,{text:e.interview.Places},null,8,["text"])]),_:1})):g("",!0),e.interview.Campaigns?(l(),v(i,{key:4,label:"Campaigns"},{default:n(()=>[t(r,{text:e.interview.Campaigns},null,8,["text"])]),_:1})):g("",!0)]),_:1})]),t(a,null,{default:n(()=>[t(i,{label:"Audio"},{default:n(()=>[c("iframe",{width:"100%",height:"20",scrolling:"no",frameborder:"no",allow:"autoplay",src:e.interview["Audio Embed URL"]},null,8,ie)]),_:1}),t(i,{class:"index",label:"Index"},{default:n(()=>[t(r,{text:e.interview.Index},null,8,["text"])]),_:1}),t(i,{label:"Transcription"},{default:n(()=>[t(p,{"initial-height":"10.5em"},{default:n(()=>[t(o,{transcription:e.interview.Transcription},null,8,["transcription"])]),_:1})]),_:1}),t(i,{label:"Citation"},{default:n(()=>[t(r,{text:e.interview.Citation},null,8,["text"])]),_:1})]),_:1})])])}const _e=y(W,[["render",re],["__scopeId","data-v-088f11e0"]]);export{_e as default};
