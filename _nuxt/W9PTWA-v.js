import{_ as B}from"./Ba_o3TaL.js";import{_ as N,a as R}from"./BTOsx74V.js";import{_ as b}from"./Btf0k7O0.js";import{_ as y,c as u,o as r,F as T,r as L,a as o,b as t,t as m,g as k,e as f,h as D,p as A,q as F,x as C,w as n,i as g,P as j,d as w}from"./BdRrNSXW.js";import{u as V,a as K}from"./CKe5z4Gr.js";const z={class:"time-code-transcription"},E={__name:"TimeCodeTranscription",props:{transcription:Object},setup(v){const c=_=>_.replaceAll("[","").replaceAll("]","");return(_,h)=>{const p=b;return r(),u("div",z,[(r(!0),u(T,null,L(v.transcription,e=>(r(),u(T,null,[o("div",null,m(c(e.time)),1),t(p,{text:e.text},null,8,["text"])],64))),256))])}}},H=y(E,[["__scopeId","data-v-8a30935e"]]),q={class:"transcription-section"},M={__name:"TranscriptionSection",props:{transcription:String},setup(v){const c=v,_=/^\s*\[(\d*:)+\d*\]\s*$/,h=x=>{if(!x)return null;const i=x.split(`
`);i.filter(d=>d.match(_));const s=[];let l,a=[];for(let d of i)if(d.match(_)){if(l&&a.length){const P=a.filter((I,S)=>I===""?!(S===0||S===a.length-1):!0);s.push({time:l,text:P.join(`
`)})}l=d,a=[]}else d===" "?a.push("<br />"):a.push(d);return l&&a.length&&s.push({time:l,text:a.join(`
`)}),s.length?s:x},p=k(()=>h(c.transcription)),e=k(()=>typeof p.value=="string");return(x,i)=>{const s=b,l=H;return r(),u("div",q,[e.value?(r(),f(s,{key:0,text:p.value},null,8,["text"])):(r(),f(l,{key:1,transcription:p.value},null,8,["transcription"]))])}}},O={class:"collapsible-section"},U={key:0},G={key:1},J={__name:"CollapsibleSection",props:{initialHeight:String},setup(v){const c=D(!0);return(_,h)=>(r(),u("div",O,[o("div",{class:"content",style:F({height:c.value?v.initialHeight:"unset"})},[A(_.$slots,"default",{},void 0,!0)],4),o("button",{onClick:h[0]||(h[0]=p=>c.value=!c.value)},[c.value?(r(),u("span",U,"Read all")):(r(),u("span",G,"Minimize"))])]))}},Q=y(J,[["__scopeId","data-v-c08b56ee"]]),W={async mounted(){},computed:{...C(K,{projectBySlug:"bySlug"}),...C(V,{interviewBySlug:"bySlug"}),interview(){return this.interviewBySlug((this._.provides[j]||this.$route).params.slug)?.[0]??{}},project(){return this.projectBySlug((this._.provides[j]||this.$route).params.project)?.[0]??{}}}},X={class:"interview-page page-wide"},Y={class:"navigation-back"},Z={class:"fields"},$={class:"row"},ee={key:0,class:"column"},te=["src"],ne={class:"row"},ie=["src"];function le(v,c,_,h,p,e){const x=B,i=R,s=N,l=b,a=M,d=Q;return r(),u("div",X,[o("div",Y,[t(x,{to:`/projects/${e.project.Slug}`},{default:n(()=>[w("< "+m(e.project.Name),1)]),_:1},8,["to"])]),o("h1",null,m(e.interview.Name),1),o("div",Z,[o("div",$,[e.interview.Photo?(r(),u("div",ee,[o("img",{class:"photo",src:e.interview.Photo.full},null,8,te)])):g("",!0),t(s,{class:"tight-column"},{default:n(()=>[t(i,{label:"Collection"},{default:n(()=>[w(m(e.project.Name),1)]),_:1}),t(i,{label:"Interviewer"},{default:n(()=>[w(m(e.interview.Interviewer),1)]),_:1}),t(i,{label:"Date"},{default:n(()=>[w(m(e.interview.Date),1)]),_:1}),t(i,{label:"Language"},{default:n(()=>[w(m(e.interview.Language),1)]),_:1})]),_:1})]),o("div",ne,[t(s,{class:"description-column-left"},{default:n(()=>[t(i,{label:"Interview Description"},{default:n(()=>[t(l,{text:e.interview.Description},null,8,["text"])]),_:1})]),_:1}),t(s,{class:"description-column-right"},{default:n(()=>[e.interview.Themes?(r(),f(i,{key:0,label:"Themes"},{default:n(()=>[t(l,{text:e.interview.Themes},null,8,["text"])]),_:1})):g("",!0),e.interview.People?(r(),f(i,{key:1,label:"People"},{default:n(()=>[t(l,{text:e.interview.People},null,8,["text"])]),_:1})):g("",!0),e.interview.Keywords?(r(),f(i,{key:2,label:"Keywords"},{default:n(()=>[t(l,{text:e.interview.Keywords},null,8,["text"])]),_:1})):g("",!0),e.interview.Places?(r(),f(i,{key:3,label:"Places"},{default:n(()=>[t(l,{text:e.interview.Places},null,8,["text"])]),_:1})):g("",!0),e.interview.Campaigns?(r(),f(i,{key:4,label:"Campaigns"},{default:n(()=>[t(l,{text:e.interview.Campaigns},null,8,["text"])]),_:1})):g("",!0)]),_:1})]),t(s,null,{default:n(()=>[t(i,{label:"Audio"},{default:n(()=>[o("iframe",{width:"100%",height:"20",scrolling:"no",frameborder:"no",allow:"autoplay",src:e.interview["Audio Embed URL"]},null,8,ie)]),_:1}),t(i,{class:"index",label:"Index"},{default:n(()=>[t(l,{text:e.interview.Index},null,8,["text"])]),_:1}),t(i,{label:"Transcription"},{default:n(()=>[t(d,{"initial-height":"10.5em"},{default:n(()=>[t(a,{transcription:e.interview.Transcription},null,8,["transcription"])]),_:1})]),_:1}),t(i,{label:"Citation"},{default:n(()=>[t(l,{text:e.interview.Citation},null,8,["text"])]),_:1})]),_:1})])])}const ue=y(W,[["render",le],["__scopeId","data-v-4d533bed"]]);export{ue as default};
